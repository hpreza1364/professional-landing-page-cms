<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لندیگ پیج حرفه‌ای با CMS</title>
    <link rel="icon" type="image/x-icon" id="dynamicFavicon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏢</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/components/navigation.css">
    <link rel="stylesheet" href="./css/components/cms-panel.css">
    <link rel="stylesheet" href="./css/components/sections.css">
    <link rel="stylesheet" href="./css/components/modals.css">
    <link rel="stylesheet" href="./css/components/responsive.css">
</head>
<body>
    <!-- Navigation -->
    <div class="fixed-nav">
        <div class="nav-logo">
            <img id="navLogo" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏢</text></svg>" alt="لوگو">
        </div>
        <div class="nav-container" id="navContainer"></div>
    </div>
    
    <!-- CMS Controls -->
    <div class="cms-toggle" id="cmsToggle">
        <i class="fas fa-cog"></i>
    </div>
    
    <div class="cms-controls" id="cmsControls">
        <div class="cms-section">
            <h3><i class="fas fa-palette"></i> تنظیمات ظاهری</h3>
            <div class="cms-control">
                <label>رنگ اصلی</label>
                <div class="color-picker">
                    <input type="color" id="primaryColor" value="#3498db">
                    <input type="text" id="primaryColorText" value="#3498db">
                </div>
            </div>
            <div class="cms-control">
                <label>رنگ ثانویه</label>
                <div class="color-picker">
                    <input type="color" id="secondaryColor" value="#2c3e50">
                    <input type="text" id="secondaryColorText" value="#2c3e50">
                </div>
            </div>
            <div class="cms-control">
                <label>رنگ دکمه‌ها</label>
                <div class="color-picker">
                    <input type="color" id="buttonColor" value="#e74c3c">
                    <input type="text" id="buttonColorText" value="#e74c3c">
                </div>
            </div>
            <div class="cms-control">
                <label>تراز متن</label>
                <div class="alignment-controls">
                    <div class="alignment-btn active" data-align="right">راست</div>
                    <div class="alignment-btn" data-align="center">وسط</div>
                    <div class="alignment-btn" data-align="left">چپ</div>
                </div>
            </div>
            <div class="cms-control">
                <button id="applyTheme">اعمال تغییرات</button>
            </div>
        </div>
        
        <div class="cms-section">
            <h3><i class="fas fa-image"></i> تصویر پس‌زمینه</h3>
            <div class="cms-control">
                <input type="file" id="bgImageUpload" accept="image/*">
                <button id="applyBgImage">اعمال تصویر</button>
            </div>
        </div>
        
        <div class="cms-section">
            <h3><i class="fas fa-download"></i> ذخیره و بازیابی</h3>
            <div class="cms-control">
                <button id="saveData">ذخیره تنظیمات</button>
            </div>
            <div class="cms-control">
                <button id="saveHTML">ذخیره به صورت HTML</button>
            </div>
            <div class="cms-control">
                <input type="file" id="loadData" accept=".json">
                <button id="importData">بارگذاری تنظیمات</button>
            </div>
        </div>
    </div>
    
    <!-- Main Content Container -->
    <div class="main-container" id="mainContainer">
        <!-- Hero Section -->
        <section class="hero-section" id="section-hero" data-section="hero">
            <img class="hero-bg" id="heroBg" src="" alt="پس‌زمینه">
            <div class="hero-content">
                <div class="business-info">
                    <div class="logo-container" id="logoContainer">
                        <img id="businessLogo" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏢</text></svg>" alt="لوگوی کسب‌وکار">
                        <div class="logo-upload-text">برای تغییر لوگو کلیک کنید</div>
                    </div>
                    <div class="business-text">
                        <h1 contenteditable="true" class="editable" id="businessName">نام کسب‌وکار شما</h1>
                        <p contenteditable="true" class="editable" id="businessTagline">توضیح کوتاه درباره کسب‌وکار شما</p>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- Add Section Button -->
    <div class="add-section-main" id="addSectionMain">
        <i class="fas fa-plus"></i>
    </div>
    
    <!-- Section Selection Modal -->
    <div class="section-modal" id="sectionModal">
        <div class="section-modal-content">
            <div class="section-modal-header">
                <h2>افزودن بخش جدید</h2>
                <div class="section-modal-close" id="sectionModalClose">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="section-options">
                <div class="section-option" data-type="about">
                    <i class="fas fa-info-circle"></i>
                    <span>درباره ما</span>
                </div>
                <div class="section-option" data-type="services">
                    <i class="fas fa-concierge-bell"></i>
                    <span>خدمات</span>
                </div>
                <div class="section-option" data-type="testimonials">
                    <i class="fas fa-comment-alt"></i>
                    <span>نظرات مشتریان</span>
                </div>
                <div class="section-option" data-type="gallery">
                    <i class="fas fa-images"></i>
                    <span>گالری تصاویر</span>
                </div>
                <div class="section-option" data-type="social">
                    <i class="fas fa-share-alt"></i>
                    <span>شبکه‌های اجتماعی</span>
                </div>
                <div class="section-option" data-type="banking">
                    <i class="fas fa-credit-card"></i>
                    <span>اطلاعات بانکی</span>
                </div>
                <div class="section-option" data-type="contact">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>تماس و نقشه</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Social Media Selection Modal -->
    <div class="social-modal" id="socialModal">
        <div class="social-modal-content">
            <div class="social-modal-header">
                <h2>افزودن شبکه اجتماعی</h2>
                <div class="social-modal-close" id="socialModalClose">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="social-options">
                <div class="social-option" data-platform="instagram">
                    <i class="fab fa-instagram"></i>
                    <span>اینستاگرام</span>
                </div>
                <div class="social-option" data-platform="telegram">
                    <i class="fab fa-telegram"></i>
                    <span>تلگرام</span>
                </div>
                <div class="social-option" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>واتساپ</span>
                </div>
                <div class="social-option" data-platform="twitter">
                    <i class="fab fa-twitter"></i>
                    <span>توییتر</span>
                </div>
                <div class="social-option" data-platform="linkedin">
                    <i class="fab fa-linkedin"></i>
                    <span>لینکدین</span>
                </div>
                <div class="social-option" data-platform="youtube">
                    <i class="fab fa-youtube"></i>
                    <span>یوتیوب</span>
                </div>
            </div>
            <div class="social-input">
                <input type="text" id="socialUsername" placeholder="نام کاربری یا آدرس">
                <button id="addSocialConfirm">افزودن</button>
            </div>
        </div>
    </div>
    
    <!-- Lightbox for Gallery -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-close" id="lightboxClose">
            <i class="fas fa-times"></i>
        </div>
        <div class="lightbox-nav">
            <button id="lightboxPrev"><i class="fas fa-chevron-right"></i></button>
            <button id="lightboxNext"><i class="fas fa-chevron-left"></i></button>
        </div>
        <div class="lightbox-content">
            <img id="lightboxImage" src="" alt="تصویر بزرگ‌شده">
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <!-- Hidden file input for logo upload -->
    <input type="file" id="logoUpload" accept="image/*" style="display: none;">
    
    <!-- Hidden file input for gallery upload -->
    <input type="file" id="galleryUpload" accept="image/*" multiple style="display: none;">
    
    <!-- Hidden file input for about image upload -->
    <input type="file" id="aboutImageUpload" accept="image/*" style="display: none;">

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- JavaScript Files -->
    <script src="./js/main.js"></script>
    <script src="./js/modules/cms-manager.js"></script>
    <script src="./js/modules/section-manager.js"></script>
    <script src="./js/modules/navigation-manager.js"></script>
    <script src="./js/modules/file-manager.js"></script>
    <script src="./js/modules/map-manager.js"></script>
    <script src="./js/modules/utils.js"></script>

    <script>
        // Fallback script in case modules don't load
        document.addEventListener('DOMContentLoaded', function() {
            // Basic functionality as fallback
            const addSectionBtn = document.getElementById('addSectionMain');
            const sectionModal = document.getElementById('sectionModal');
            
            if (addSectionBtn && sectionModal) {
                addSectionBtn.addEventListener('click', function() {
                    sectionModal.classList.add('active');
                    console.log('Add section clicked!');
                });
            }

            // Close modal when clicking X
            const sectionModalClose = document.getElementById('sectionModalClose');
            if (sectionModalClose) {
                sectionModalClose.addEventListener('click', function() {
                    sectionModal.classList.remove('active');
                });
            }

            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === sectionModal) {
                    sectionModal.classList.remove('active');
                }
            });

            // Section selection
            const sectionOptions = document.querySelectorAll('.section-option');
            sectionOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    alert(`بخش ${type} انتخاب شد! (این پیام نشان می‌دهد که JavaScript کار می‌کند)`);
                    sectionModal.classList.remove('active');
                });
            });

            console.log('Fallback JavaScript loaded successfully!');
        });
    </script>
</body>
</html>
